
<alert [alertMessage]="alertMessage"></alert>

<form [formGroup]="productListForm" (ngSubmit)="save(productListForm)" novalidate>
<div class="container" style="width:100%;margin-top:1em">
  <div class="row">
    <div class="col">
      <button class="btn btn-secondary pull-left" [ngClass]="{'btn-success':toUpdate==true}" (click)="save()">
        <i class="fa f fa-save"></i>
      </button>
    </div>
    <div class="col">
      <h3 class="text-center">Configurations SKUs</h3>
    </div>
    <div class="col">
      <div class="pull-right">
        <button type="button" class="btn btn-secondary btn-inactive" (click)="this.filters.inactive=!filters.inactive;filter()" [ngClass]="{'active':filters.inactive==true}">
          <i class="fa fa-minus-circle"></i>
        </button>
        <button [routerLink]="['../form/new']" type="button btn-add" class="btn btn-secondary  btn-add">
          <i class="fa fa-plus"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="container" style="margin-top:2em;width:90%">
    <div class="form-group row">
      <div class="col-xs-12">
        <label>
            <input id="radioBread" #breadType type="radio" formControlName="breadType" value="1" (click)="changeBreadFilter(1)">&nbsp;Pain&nbsp;&nbsp;
        </label>
        <label>
            <input id="radioRoll" #breadType type="radio" formControlName="breadType" value="2" (click)="changeBreadFilter(2)">&nbsp;Roll&nbsp;&nbsp;
        </label>
      </div>
    </div>
    <!-- <table class="table table-bordered table-sm">
      <thead class="thead-inverse">
        <tr class="text-center">
          <th style="width:1%;vertical-align:middle">
            <button class="btn btn-secondary btn-sm btn-erase" (click)="eraseFilter()" style="margin:0">
              <i class="fa fa-eraser"></i>
            </button>
          </th>
          <th style="width:25%">
            <input type="text" [(ngModel)]="filters.productId" class="form-control" (change)="filter()">
          </th>
          <th style="width:75%">
            <input type="text" [(ngModel)]="filters.description" class="form-control" (change)="filter()">
          </th>
          <tr>
            <th></th>
            <th class="">Product Id</th>
            <th class="">Description</th>
          </tr>
      </thead>
      <tbody>
        <tr class="text-center" *ngFor="let product of filteredProducts" [ngClass]="{'canceled':product.inactive}" draggable="true"
          [attr.position]="product.position" [routerLink]="['../form/'+product.productId]">
          <td></td>
          <td>{{product.productId}}</td>
          <td>{{product.description}}</td>
        </tr>
      </tbody>
    </table> -->
  <div class="form-group" *ngIf="productListForm.controls['breadType'].value=='1'">
    <div class="form-group row" *ngFor="let variety of filteredVarieties;">
        <div class="col-xs-12">
            <div>
                <h3 class="text-center">Variété {{variety.varietyId}}</h3>
            </div>
        </div>
        <table class="table table-striped table-bordered table-sm" >
            <thead class="thead-inverse">
              <tr>
                <th>SKU</th>
                <th>Emballeuse 1</th>
                <th>Emballeuse 2</th>
                <th>Emballeuse 3</th>
                <th>Emballeuse 4</th>
                <th>Hauteur Tray</th>
                <th>Largeur Tranche</th>
                <th>Patron d'emballage</th>
                <th>Quantité par emballage</th>
                <th>Type de sac</th>
                <th>Date modifiée</th>
                <th>Inactive</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let product of variety.products" class="text-center" (click)="onSkuInfo(product)" [routerLink]="['../form/sku'+product.productId]" draggable="true">
                <td>{{product.productId}}</td>
                <td>{{product.packer1}}</td>
                <td>{{product.packer2}}</td>
                <td>{{product.packer3}}</td>
                <td>{{product.packer4}}</td>
                <td>{{product.trayHeight}}</td>
                <td>{{product.sliceWidth}}</td>
                <td>{{product.patron}}</td>
                <td>{{product.quantityPackage}}</td>
                <td>{{product.bagType}}</td>
                <td>{{product.dateModified}}</td>
                <td>{{product.inactive}}</td>               
              </tr>
        </table>
    </div>
  </div>

  <div class="form-group" *ngIf="productListForm.controls['breadType'].value=='2'">
      <div class="form-group row" *ngFor="let variety of filteredVarieties;">
          <div class="col-xs-12">
              <div>
                  <h3 class="text-center">Variété {{variety.varietyId}}</h3>
              </div>
          </div>
          <table class="table table-striped table-bordered table-sm" >
              <thead class="thead-inverse">
                <tr>
                  <th>SKU</th>
                  <th>Emballeuse 6</th>
                  <th>Emballeuse 7</th>
                  <th>Emballeuse 8</th>
                  <th>Emballeuse 9</th>
                  <th>Emballeuse 10</th>
                  <th>Emballeuse 11</th>
                  <th>Hauteur Tray</th>
                  <th>Largeur Tranche</th>
                  <th>Patron d'emballage</th>
                  <th>Quantité par emballage</th>
                  <th>Type de sac</th>
                  <th>Date modifiée</th>
                  <th>Inactive</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let product of variety.products" class="text-center" (click)="onSkuInfo(product)" class="text-center" [routerLink]="['../form/sku'+product.productId]" draggable="true">
                  <td>{{product.productId}}</td>
                  <td>{{product.packer6}}</td>
                  <td>{{product.packer7}}</td>
                  <td>{{product.packer8}}</td>
                  <td>{{product.packer9}}</td>
                  <td>{{product.packer10}}</td>
                  <td>{{product.packer11}}</td>
                  <td>{{product.trayHeight}}</td>
                  <td>{{product.sliceWidth}}</td>
                  <td>{{product.patron}}</td>
                  <td>{{product.quantityPackage}}</td>
                  <td>{{product.bagType}}</td>
                  <td>{{product.dateModified}}</td>
                  <td>{{product.inactive}}</td>               
                </tr>
          </table>
      </div>
    </div>
  </div>
</div>
</form>